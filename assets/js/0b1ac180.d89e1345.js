"use strict";(self.webpackChunkcasdk_docs=self.webpackChunkcasdk_docs||[]).push([[5863],{2458:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var i=t(4848),s=t(8453);const r={sidebar_position:1},a="Architecture Overview",o={id:"architecture/overview",title:"Architecture Overview",description:"The Carbon Aware SDK is built with three tiers where each tier has its own set",source:"@site/docs/architecture/overview.md",sourceDirName:"architecture",slug:"/architecture/overview",permalink:"/docs/architecture/overview",draft:!1,unlisted:!1,editUrl:"https://github.com/Green-Software-Foundation/carbon-aware-sdk/docs/architecture/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Architecture",permalink:"/docs/category/architecture"},next:{title:"Data Sources",permalink:"/docs/architecture/data-sources"}},c={},d=[{value:"Consumer Tier",id:"consumer-tier",level:2},{value:"Business Logic Tier",id:"business-logic-tier",level:2},{value:"Handlers",id:"handlers",level:3},{value:"Data Tier",id:"data-tier",level:2},{value:"Data Source Interface",id:"data-source-interface",level:3},{value:"Data Source Implementation",id:"data-source-implementation",level:3},{value:"Dependency Registration",id:"dependency-registration",level:2},{value:"Example Call Flow",id:"example-call-flow",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"architecture-overview",children:"Architecture Overview"})}),"\n",(0,i.jsx)(n.p,{children:"The Carbon Aware SDK is built with three tiers where each tier has its own set\nof responsibilities."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Consumer Tier"}),"\n",(0,i.jsx)(n.li,{children:"Business Logic Tier"}),"\n",(0,i.jsx)(n.li,{children:"Data Tier"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each tier only has knowledge of its own responsibilities, and specific channels\nof communication between adjacent tiers. This allows the SDK to switch to\ndifferent implementations withing the same tier without any necessary code\nchanges."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Tiers architecture diagram",src:t(5533).A+"",width:"717",height:"511"})}),"\n",(0,i.jsx)(n.h2,{id:"consumer-tier",children:"Consumer Tier"}),"\n",(0,i.jsx)(n.p,{children:"The consumer tier is the entry point for interacting with the SDK. It handles\ntaking the user input and deciding which handler(s) should handle processing the\ninput. There are currently 2 different consumers that can be used in the SDK"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"A RESTful WebAPI that can be called using HTTP requests."}),"\n",(0,i.jsx)(n.li,{children:"A command line tool that runs directly on a host machine."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Both consumers access the same components in the tiers below."}),"\n",(0,i.jsx)(n.h2,{id:"business-logic-tier",children:"Business Logic Tier"}),"\n",(0,i.jsx)(n.p,{children:"The business logic tier functions as the processor, taking in the user input and\nfiguring out how to fulfill it. It is comprised of a set of handlers that know\nwhat type of data they need and how to calculate the result."}),"\n",(0,i.jsx)(n.h3,{id:"handlers",children:"Handlers"}),"\n",(0,i.jsx)(n.p,{children:"Handlers have knowledge of the underlying data source interfaces in the data\ntier. A Handler takes in consumer requests, calls the specified data source, and\nperforms any data aggregation required before returning the result to the\nconsumer. Each Handler is responsible for handling requests specific to a\nfunctionality."}),"\n",(0,i.jsxs)(n.p,{children:["Currently, the SDK provides 2 handlers for obtaining the carbon emissions data-\n",(0,i.jsx)(n.code,{children:"EmissionsHandler"})," and ",(0,i.jsx)(n.code,{children:"ForecastHandler"})," to handle requests for actual carbon\nemissions and forecasted carbon emissions respectively. The ",(0,i.jsx)(n.code,{children:"EmissionsHandler"}),"\nhandles requests for various carbon emissions information. It can calculate the\naverage carbon emissions over a time period, or the best carbon emissions given\na set of locations. It can transform forecasted carbon emissions to suit\nparticular use-cases. It can also just deliver the emissions data points in a\nstandard schema without performing any calculations. The ",(0,i.jsx)(n.code,{children:"ForecastHandler"})," is\nresponsible for getting the forecasted carbon emissions values from the\nunderlying datasource. It can filter the emissions forecast based on the window\nsize passed as an input and can also perform operations like finding the rolling\naverage of emission values for a give window size. In addition to the above\nhandlers, there is a ",(0,i.jsx)(n.code,{children:"LocationHandler"})," which is responsible for retrieving all\nthe locations supported by the underlying data source."]}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"/docs/architecture/c-sharp-client-library",children:"c-sharp-client-library README"})," for more\ndetailed information."]}),"\n",(0,i.jsx)(n.h2,{id:"data-tier",children:"Data Tier"}),"\n",(0,i.jsx)(n.p,{children:"The data tier is responsible for ingesting data into the SDK. It is comprised of\na set of data source interfaces representing the broad categories of data used\nby the SDK."}),"\n",(0,i.jsx)(n.h3,{id:"data-source-interface",children:"Data Source Interface"}),"\n",(0,i.jsx)(n.p,{children:"A data source interface defines all the necessary parameters and functions\nneeded to access that category of data. These definitions must be independent of\nspecific data sources and use abstracted input/output parameters expected from\nthe business logic tier. This abstraction enables multiple data sources to\nextend a multiple interfaces and be switched out and configured based on the\nneeds of the operator."}),"\n",(0,i.jsx)(n.h3,{id:"data-source-implementation",children:"Data Source Implementation"}),"\n",(0,i.jsx)(n.p,{children:"A data source inherits from a single or multiple data source interfaces and does\nthe work of accessing a specific data provider. Each data source the information\nspecific to the data provider it is accessing, including any authentication\nneeds, the format of the request and response, etc. It is also responsible for\nconverting the request from the business logic tier into the required provider\nrequest, and similarly, converting the provider response back into the expected\nresult."}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.a,{href:"/docs/architecture/data-sources",children:"data source README"})," for more detailed information."]}),"\n",(0,i.jsx)(n.h2,{id:"dependency-registration",children:"Dependency Registration"}),"\n",(0,i.jsx)(n.p,{children:"The SDK uses dependency injection to load the data sources based on set\nenvironment variables. To register a new dependency, a new\nServiceCollectionExtension method must be defined. These dependencies are loaded\nin a hierarchical structure such that:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Each data source defines a ",(0,i.jsx)(n.code,{children:"ServiceCollectionExtension"})," method."]}),"\n",(0,i.jsxs)(n.li,{children:["All available data sources are registered in the ",(0,i.jsx)(n.code,{children:"DataSource.Registration"}),"\nproject."]}),"\n",(0,i.jsxs)(n.li,{children:["The GSF library defines a ",(0,i.jsx)(n.code,{children:"ServiceCollectionExtension"})," method where it\nregisters the data sources for the handlers to use."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"Program.cs"})," file registers the GSF library classes at startup"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-call-flow",children:"Example Call Flow"}),"\n",(0,i.jsxs)(n.p,{children:["The swimlanes diagram below follows an example call through all 3 tiers of the\narchitecture. In this diagram, the ",(0,i.jsx)(n.em,{children:"Client"})," is a user of the SDK and the ",(0,i.jsx)(n.em,{children:"Data\nProvider"})," is a source of raw data, such as ",(0,i.jsx)(n.a,{href:"https://www.wattime.org",children:"WattTime"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Tiers flow diagram",src:t(9803).A+"",width:"1300",height:"1016"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},9803:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/overview-tiers-swimlanes-80838b0b809c39a74bcb042b0b24fb79.png"},5533:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/tiers-architecture.drawio-bed72b086a7d97f4eff8a69a941cdc1c.png"},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);